<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>apple product on scroll</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <link rel='stylesheet'
        href='https://cdnjs.cloudflare.com/ajax/libs/modern-normalize/0.6.0/modern-normalize.min.css' />
    <link rel="stylesheet" href="main.css">
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js'></script>

</head>

<body>
    <section class="header-section">
        <h1>
            apple product on scroll effects
        </h1>
        <div>
            <a id="tag"></a>
            <span class="tag">position: sticky</span>
            <span class="tag">clip-path: inset</span>
            <span class="tag">scroll</span>
            <span class="tag">requestAnimationFrame</span>
            <span class="tag">apple</span>
            <span class="tag">gogoro</span>
        </div>
    </section>
    <section class="text-section">
        <div>
            <p>
                參考以下頁面仿製，並借用部份素材(如有不當請告知 🙇‍♂️)<br>
                <a href="https://www.apple.com/tw/iphone-se/" target="_blank">https://www.apple.com/tw/iphone-se/</a><br>
                <a href="https://www.gogoro.com/tw/smartscooter/viva/" target="_blank">https://www.gogoro.com/tw/smartscooter/viva/</a>
            </p>
            <p>
                商品具多顏色選擇時，使用這個呈現方式視覺上和使用者體驗都不錯<br>
                除了讓畫面簡單乾淨，也能帶上產品大標做為特色說明~
            </p>
            <p style="margin-bottom: 0;">
                如上 <a href="#tag">tag</a> 所示~，這個特效需要用到下面這些功能
            </p>
            <ul>
                <li>position: sticky: <br>
                    鎖住部份區塊(section) 達成視差捲動
                </li>
                <li>clip-path: inset<br>
                    最關鍵的遮罩效果，用後層蓋住前層<br>
                    完全覆蓋: clip-path: inset(100% 0px 0px 0px);<br>
                    不覆蓋: clip-path: inset(0% 0px 0px 0px);
                </li>
                <li>scroll, requestAnimationFrame<br>
                    配合上面，每個 frame 檢查 scroll 位置以此計算遮罩百分比
                </li>
            </ul>

            <p>
                <h3>先看看下面的效果~</h3>
            </p>
        </div>
    </section>
    <section class="color-section">
        <div class="sticky-container">
            <div class="stack-container">
                <div class="product _1">
                    <div class="product-text">
                        <span class="product-1-info-1"><small>簡單</small>萊姆灰</span>
                        <br><br>
                    </div>
                    <div class="product-img"><img src="./images/FCD-LimeGrey.png"></div>
                </div>
                <div class="product _2 product-clip-path">
                    <div class="product-text">
                        <span class="product-2-info-1"><small>簡單</small>萊姆灰</span><br>
                        <span class="product-2-info-2">薄荷藍<small>滿街跑</small></span>
                        <br>
                    </div>
                    <div class="product-img"><img src="./images/FCD-MintBlue.png"></div>
                </div>
                <div class="product _3 product-clip-path">
                    <div class="product-text">
                        <span class="product-3-info-1"><small>簡單</small>萊姆灰</span><br>
                        <span class="product-3-info-2">薄荷藍<small>滿街跑</small></span><br>
                        <span class="product-3-info-3">石榴紅<small><small>超特別</small></small></span>
                    </div>
                    <div class="product-img"><img src="./images/FCD-PomegranteRed.png"></div>
                </div>
            </div>
        </div>
    </section>
    <section class="color-section-offset">
        <div class="product-img product-img-offset">
            <img src="FCD-PomegranteRed.png">
        </div>
        <div class="product-img-info">
            <a href="https://www.gogoro.com/tw/smartscooter/specs/?models=gogoro-viva-plus" target="_blank"
                class="car-button">
                <span>checkout it now!!</span>
                <span class="car"> 🛵</span>
            </a>
        </div>
    </section>
    <section class="reset-section text-section">
        <p>
            以上<br>
            這樣的效果需要很多個容器來組合完成<br>
            由外至內逐一說明~
        </p>
        <ul>
            <li>.color-section<br>
                是整個特效的主容器，定義整個區塊可捲動範圍(也就是有幾個過場區塊/畫面)
                例如有三個產品區塊該容器的高度最少應該是...
                <pre><code class="code css"
                    style="height: 160px;">
    height: calc(3 * 100vh);

    /* 也可以額外多加入一些高度做為捲動 buffer，減緩 product 區塊的出場時間 */
    height: calc((3 * 100vh) + 100vh);
                </code></pre>
            </li>
            <li>.sticky-container<br>
                完成 sticky(fixed) 功能的容器<br>
                別忘了一個過場區塊高度等於使用者裝置高度(100vh)
            </li>
            <li>.stack-container<br>
                把多過場區塊堆疊在一個畫面內的容器
            </li>
            <li>.product _1 ~ _3<br>
                product 過場區塊/畫面用容器<br>
                包含 product 說明文字和大圖<br>
                在這個區塊可以加入更多的花式效果讓畫面更有趣 🙄
            </li>
        </ul>
        <p>
            再接著看下一個範例~
        </p>
    </section>
    <section class="color-section-2">
        <div class="sticky-container">
            <div class="stack-container">
                <div class="product2 _1">
                    <div class="product-text">
                        <span class="product2-1-info-1">黑色<small>買不起</small></span>
                        <br><br>
                    </div>
                    <div class="product-img"><img src="./images/finishes_black__b06syayq94wi_small_2x.png"></div>
                </div>
                <div class="product2 _2 product-clip-path-vertical">
                    <div class="product-text">
                        <span class="product2-2-info-1">黑色<small>買不起</small></span>
                        <span class="product2-2-info-2">白色<small>沒錢買</small></span>
                        <br><br>
                    </div>
                    <div class="product-img"><img src="./images/finishes_white__drv9fwq9vzwy_small_2x.png"></div>
                </div>
                <div class="product2 _3 product-clip-path-vertical">
                    <div class="product-text">
                        <span class="product2-3-info-1">黑色<small>買不起</small></span>
                        <span class="product2-3-info-2">白色<small>沒錢買</small></span><br>
                        <span class="product2-3-info-3">紅色<small>貴33</small></span>
                    </div>
                    <div class="product-img"><img src="./images/finishes_red__eqfv1ongy282_small_2x.png"></div>
                </div>
            </div>
        </div>
    </section>
    <section class="reset-section text-section">
        <p>並沒有將所有部份處理的很好</p>

    </section>
    <section class="footer-section">
        https://github.com/cscolabear/apple-product-on-scroll
        https://cscolabear.github.io/apple-product-on-scroll/

        "The Notch" and CSS: env safe-area-inset
        https://www.codewall.co.uk/css-env-variables-for-todays-edge-screen-devices/

        https://css-tricks.com/the-notch-and-css/
        https://webkit.org/blog/7929/designing-websites-for-iphone-x/
    </section>

</body>

<script src="main.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js"></script>
<link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/a11y-dark.min.css">
<script>
    document.querySelectorAll('.code').forEach(elem => {
        hljs.highlightBlock(elem);
    });
</script>
</html>
